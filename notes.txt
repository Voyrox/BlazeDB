# Auth + Keyspace Ownership Plan

Auth: optional (enabled when configured)

Accounts
    - Level 0 (root): can access SYSTEM; can create/delete keyspaces; can assign keyspace owners; can manage users
    - Level 1 (user): cannot access SYSTEM; cannot create/delete keyspaces; can only operate inside keyspaces they own (or are granted)

Keyspaces (global namespace)
    - Only root can CREATE/DROP KEYSPACE
    - Each keyspace has an owner user
    - Non-root users can only USE/SHOW TABLES/CREATE TABLE/READ/WRITE inside keyspaces they own (or are granted)
    - SHOW KEYSPACES:
        - root sees all keyspaces
        - users see only keyspaces they own (or are granted)

SYSTEM tables (minimal)
    - SYSTEM.USERS
        - username (PK)
        - password
        - level (0/1)
        - enabled
        - created_at
    - SYSTEM.KEYSPACE_OWNERS
        - keyspace (PK)
        - owner_username
        - created_at
    - Optional (for sharing later): SYSTEM.KEYSPACE_GRANTS
        - keyspace#username (PK)
        - created_at

Startup
    - Ensure SYSTEM keyspace + required SYSTEM tables exist
    - Load SYSTEM tables once and build in-memory caches:
        - username -> user record
        - keyspace -> owner
    - Heavy boot is OK; per-request authz should be cache lookups (no disk reads)
